# Discord Chat Mirror

## Overview
This is a Discord bot that mirrors messages from specific Discord channels to other channels using webhooks. It can forward messages, files, embeds, stickers, and even animated profile pictures.

**Project Type:** Backend only (Discord Bot)
**Main Language:** TypeScript/Node.js
**Discord.js Version:** 14.24.2

## Project Structure
- `src/` - TypeScript source files
  - `modules/Discord.ts` - Main Discord WebSocket client and message forwarding logic
  - `utils/env.ts` - Environment variable configuration
  - `utils/logger.ts` - Logging utility
  - `utils/functions/parseEnvValue.ts` - Helper to parse comma/semicolon-separated env values
  - `index.ts` - Entry point
- `dist/` - Compiled JavaScript output (generated by TypeScript)

## How It Works
1. Connects to Discord Gateway via WebSocket
2. Listens for messages in configured channels (CHANNELS_ID)
3. Forwards messages to configured webhooks (WEBHOOKS_URL)
4. Supports mirroring:
   - Normal messages
   - Files and attachments
   - Embeds
   - Stickers (converted to images)
   - Animated profile pictures

## Required Environment Variables
- `DISCORD_TOKEN` - Discord bot token or user token (WARNING: Using user token is against Discord TOS)
- `CHANNELS_ID` - Comma or semicolon-separated list of channel IDs to monitor (e.g., "123456789, 987654321")
- `WEBHOOKS_URL` - Comma or semicolon-separated list of webhook URLs to forward messages to

## Optional Environment Variables
- `ENABLE_BOT_INDICATOR` - Set to "yes" to add [BOT] or [USER] suffix to usernames (default: yes)
- `USE_WEBHOOK_PROFILE` - Set to "yes" to use webhook's own profile instead of mirroring author's (default: no)
- `DEBUG_MODE` - Set to "yes" for debug logging (default: no)

## Build & Run
- Build: `npm run build` (lints and compiles TypeScript)
- Run: `npm start` (runs compiled code)
- Dev mode: `npm run start:dev` (watch mode with auto-reload)

## Recent Changes
- 2025-11-04: Initial Replit setup, installed dependencies with --legacy-peer-deps due to ESLint version conflicts

## Important Notes
- This bot uses Discord's WebSocket Gateway directly instead of the high-level discord.js client
- The bot maintains session state and can resume connections after disconnects
- Using a user token instead of a bot token violates Discord's Terms of Service
- File size limit: Attachments >8MB are sent as URLs instead of file uploads
